webpackJsonp([12,15],{218:function(t,e,s){e=t.exports=s(5)(),e.push([t.id,"dl{padding:5px;margin:3px;clear:left}dl dt{float:left}.el-input__inner{border-style:solid;border-radius:4px;border:1px solid #bfd9cc}.rightbutton{float:right}.md{color:#149c4c;font-weight:700;font-size:16px;border-bottom:1px solid #bfd9cc;padding-top:15px;padding-bottom:15px;margin-bottom:15px}.textClass{background-color:#fff;border-style:solid;border-radius:4px;border:1px solid #bfd9cc;padding:15px}","",{version:3,sources:["/./src/pages/deploy_platform/project.vue"],names:[],mappings:"AACA,GACE,YAAY,AACZ,WAAW,AACX,UAAW,CACZ,AACD,MACE,UAAW,CACZ,AACD,iBACE,mBAAoB,AACpB,kBAAmB,AACnB,wBAAqC,CACtC,AACD,aACE,WAAa,CAId,AACD,IACE,cAAe,AACf,gBAAiB,AACjB,eAAgB,AAChB,gCAA4C,AAC5C,iBAAkB,AAClB,oBAAqB,AACrB,kBAAoB,CACrB,AACD,WACE,sBAAwB,AACxB,mBAAoB,AACpB,kBAAmB,AACnB,yBAAqC,AACrC,YAAc,CACf",file:"project.vue",sourcesContent:["\ndl{\n  padding:5px;\n  margin:3px;\n  clear:left;\n}\ndl dt {\n  float:left;\n}\n.el-input__inner {\n  border-style: solid;\n  border-radius: 4px;\n  border: 1px solid rgb(191, 217, 204);\n}\n.rightbutton {\n  float: right;\n  /*border: 1px solid rgb(191, 217, 204);*/\n  /*background-color: #149C4C;*/\n  /*color: white;*/\n}\n.md{\n  color: #149C4C;\n  font-weight: 700;\n  font-size: 16px;\n  border-bottom: 1px solid rgb(191, 217, 204);\n  padding-top: 15px;\n  padding-bottom: 15px;\n  margin-bottom: 15px;\n}\n.textClass {\n  background-color: white;\n  border-style: solid;\n  border-radius: 4px;\n  border: 1px solid rgb(191, 217, 204);\n  padding: 15px;\n}\n"],sourceRoot:"webpack://"}])},232:function(t,e,s){var o=s(218);"string"==typeof o&&(o=[[t.id,o,""]]);s(6)(o,{});o.locals&&(t.exports=o.locals)},305:function(t,e,s){s(232);var o=s(2)(s(389),s(315),null,null);t.exports=o.exports},315:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("hs-layout_auto",[s("div",{staticStyle:{"padding-top":"50px"}},[s("div",{staticClass:"tabs_class"},[s("el-card",{staticClass:"box-card",staticStyle:{width:"100%"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",{staticStyle:{color:"#149C4C","font-weight":"700","font-size":"16px"}},[t._v("\n              "+t._s(t.resForm[0].name)+"\n            ")]),t._v(" "),s("span",[s("router-link",{staticClass:"right",attrs:{to:{name:"013"}}},[s("el-button",{staticClass:"rightbutton",attrs:{type:"primary"},on:{click:function(t){}}},[t._v("发布管理")])],1)],1)]),t._v(" "),s("div",{staticClass:"textClass"},[s("dl",[s("dt",[t._v("开发语言：")]),t._v(" "),s("dd",[t._v(t._s(t.resForm[0].type))])]),t._v(" "),s("dl",[s("dt",[t._v("gitlab地址：")]),t._v(" "),s("dd",[t._v(t._s(t.resForm[0].repository))])]),t._v(" "),s("dl",[s("dt",[t._v("部署路径：")]),t._v(" "),s("dd",[t._v(t._s(t.resForm[0].server_path))])]),t._v(" "),s("dl",[s("dt",[t._v("创建时间：")]),t._v(" "),s("dd",[t._v(t._s(t.resForm[0].created))])]),t._v(" "),s("dl",[s("dt",[t._v("软件下载路径：")]),t._v(" "),s("dd",[t._v(t._s(t.resForm[0].download_path))])])]),t._v(" "),s("div",{staticClass:"md"},[t._v("发布人员列表")]),t._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"添加发布人员"},on:{change:t.userExist},model:{value:t.modForm.user,callback:function(e){t.$set(t.modForm,"user","string"==typeof e?e.trim():e)},expression:"modForm.user"}},t._l(t.tableData1,function(e){return s("el-option",{key:e.id,attrs:{value:e.username}},[t._v(t._s(e.username)+"\n              ")])}))],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("el-button",{attrs:{type:"primary"},on:{click:t.addUsers}},[t._v("确认添加")]),t._v(" "),s("el-button",{attrs:{type:"primary",disabled:""}},[t._v("批量添加")])],1)],1),t._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.resUsers,border:""}},[s("el-table-column",{attrs:{prop:"user__username",label:"Name"}}),t._v(" "),s("el-table-column",{attrs:{prop:"user__email",label:"email"}}),t._v(" "),s("el-table-column",{attrs:{prop:"title",label:"title"}}),t._v(" "),s("el-table-column",{attrs:{prop:"status",label:"status"}}),t._v(" "),s("el-table-column",{attrs:{prop:"Action",label:"Action"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){t.deleteUser(e.row)}}},[t._v("DELETE")])]}}])})],1),t._v(" "),s("div",{staticClass:"md"},[t._v("主机管理")]),t._v(" "),s("el-tabs",{attrs:{type:"border-card"}},[s("el-tab-pane",{attrs:{label:"主机列表"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-input",{attrs:{placeholder:"请输入内容"},on:{blur:t.hostExist},model:{value:t.modForm.host,callback:function(e){t.$set(t.modForm,"host","string"==typeof e?e.trim():e)},expression:"modForm.host"}})],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("el-button",{attrs:{type:"primary"},on:{click:t.addHost}},[t._v("添加主机")]),t._v(" "),s("el-button",{attrs:{type:"primary",disabled:""}},[t._v("批量添加")])],1)],1),t._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.resHosts,border:""}},[s("el-table-column",{attrs:{prop:"hostname",label:"主机名"}}),t._v(" "),s("el-table-column",{attrs:{prop:"created",label:"创建时间"}}),t._v(" "),s("el-table-column",{attrs:{prop:"Action",label:"Action"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){t.deleteHost(e.row)}}},[t._v("DELETE")])]}}])})],1)],1),t._v(" "),s("el-tab-pane",{attrs:{label:"other"}})],1),t._v(" "),s("div",{staticClass:"md"},[t._v("删除项目")]),t._v(" "),s("el-button",{attrs:{type:"danger"},on:{click:t.DeleteItem}},[t._v("DELETE")])],1)],1)])])},staticRenderFns:[]}},389:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{modForm:{id:"",user:"",user_id:"",host:"",hostname:""},tableData1:[],resForm:"",resUsers:"",resHosts:"",input3:"",enable_add:!1,item_id:""}},activated:function(){this.$route.params.hasOwnProperty("h")&&(this.h=this.$route.params.h),this.get_all_list()},methods:{get_all_list:function(){var t=this;console.log("project",this.$route.params.id),this.$route.params.id&&(this.item_id=this.$route.params.id),this.$http.get(this.deploy_api+"mod_item/",{params:this.item_id}).then(function(e){console.log("this resp",e.data),t.resForm=e.data.data,t.resUsers=e.data.users,t.resHosts=e.data.hosts}).catch(function(e){t.resForm="error",console.log(t.resForm)}),this.$http.get(this.passport+"list").then(function(e){t.tableData1=e.data.all_user}).catch(function(t){console.log(t)})},userExist:function(){for(var t in this.resUsers)this.modForm.user===this.resUsers[t].user__username&&(this.$alert("This User is Exist, Please Choose Again..."),this.modForm.user="")},hostExist:function(){for(var t in this.resHosts)this.modForm.host===this.resHosts[t].hostname&&(this.$alert("This Host is Exist, Please Input Again..."),this.modForm.host="")},addUsers:function(){var t=this;if(0===this.modForm.user.length)this.$alert("Select Not Empty...");else{for(var e in this.tableData1)this.modForm.user===this.tableData1[e].username&&(this.modForm.user_id=this.tableData1[e].id);this.modForm.host="",this.modForm.id=this.resForm[0].id,console.log("addUsers",this.modForm),this.$http.post(this.deploy_api+"mod_item/",this.modForm).then(function(e){e.data.status?(t.$notify({title:"成功",message:"信息已提交",type:"success"}),t.modForm.user_id="",t.get_all_list()):t.$alert(e.data.msg)}).catch(function(t){console.log(t)})}},deleteUser:function(t){var e=this;console.log("deleteUser",t.user__username),this.modForm.host="";for(var s in this.tableData1)t.user__username===this.tableData1[s].username&&(this.modForm.user_id=this.tableData1[s].id);this.modForm.id=this.resForm[0].id,console.log(this.modForm),this.$http.put(this.deploy_api+"mod_item/",this.modForm).then(function(t){t.data.status?(e.modForm.user_id="",e.get_all_list()):e.$alert(t.data.msg)}).catch(function(t){console.log(t)})},addHost:function(){var t=this;this.modForm.user_id="",this.modForm.id=this.resForm[0].id,0===this.modForm.host.length?this.$alert("Input Not Empty..."):this.$http.post(this.deploy_api+"mod_item/",this.modForm).then(function(e){e.data.status?(t.$notify({title:"成功",message:"信息已提交",type:"success"}),t.modForm.host="",t.get_all_list()):t.$alert(e.data.msg)}).catch(function(t){console.log(t)})},deleteHost:function(t){var e=this;this.modForm.user_id="",this.modForm.hostname=t.hostname,this.modForm.id=this.resForm[0].id,console.log("deleteHost",t,this.modForm),this.$http.put(this.deploy_api+"mod_item/",this.modForm).then(function(t){t.data.status?(e.modForm.host="",e.get_all_list()):e.$alert(t.data.msg)}).catch(function(t){console.log(t)})},DeleteItem:function(){var t=this;console.log("delete",this.resForm[0].id),this.modForm.id=this.resForm[0].id,this.$http.delete(this.deploy_api+"del_item/",{params:this.item_id}).then(function(e){e.data.status?(t.h?t.$router.go(1):window.location="/deploy_platform/deploy",t.modForm.host=""):t.$alert(e.data.msg)}).catch(function(t){console.log(t)})}}}}});
//# sourceMappingURL=12.c2bdc2dae44b52b519dd.js.map