webpackJsonp([4,15],{229:function(e,t,l){t=e.exports=l(5)(),t.push([e.id,".el-dialog{width:50%}.v-modal{display:none}.el-tabs__new-tab{float:left}.el-tabs__content{padding-left:20px}.el-form{width:80%}.el-input__inner{border-style:solid;border-radius:4px;border:1px solid #bfd9cc}","",{version:3,sources:["/./src/pages/dns/dns_oper.vue"],names:[],mappings:"AACA,WACE,SAAW,CACZ,AACD,SACE,YAAc,CACf,AACD,kBACE,UAAY,CACb,AACD,kBACE,iBAAmB,CACpB,AACD,SACE,SAAW,CACZ,AACD,iBACE,mBAAoB,AACpB,kBAAmB,AACnB,wBAAqC,CACtC",file:"dns_oper.vue",sourcesContent:["\n.el-dialog {\n  width: 50%;\n}\n.v-modal {\n  display: none;\n}\n.el-tabs__new-tab {\n  float: left;\n}\n.el-tabs__content {\n  padding-left: 20px;\n}\n.el-form {\n  width: 80%;\n}\n.el-input__inner {\n  border-style: solid;\n  border-radius: 4px;\n  border: 1px solid rgb(191, 217, 204);\n}\n"],sourceRoot:"webpack://"}])},245:function(e,t,l){var o=l(229);"string"==typeof o&&(o=[[e.id,o,""]]);l(6)(o,{});o.locals&&(e.exports=o.locals)},308:function(e,t,l){l(245);var o=l(2)(l(392),l(336),null,null);e.exports=o.exports},336:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("hs-layout_auto",[l("div",{staticStyle:{"padding-top":"50px"}},e._l(e.res_data,function(t){return l("div",{staticClass:"tabs_class"},[l("el-card",{staticClass:"box-card"},[l("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[l("span",{staticStyle:{color:"#149C4C","font-weight":"700","font-size":"16px"}},[e._v("\n                "+e._s(t[0])+"\n              ")]),e._v(" "),l("span",[l("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(l){e.add_item(t[0])}}},[e._v("添加解析")])],1)]),e._v(" "),l("div",{staticClass:"text item"},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:t[1],height:"250"}},[l("el-table-column",{attrs:{prop:"id",label:"记录ID"}}),e._v(" "),l("el-table-column",{attrs:{prop:"type",label:"记录类型"}}),e._v(" "),l("el-table-column",{attrs:{prop:"host",label:"主机记录"}}),e._v(" "),l("el-table-column",{attrs:{prop:"ns_path",label:"解析线路"}}),e._v(" "),l("el-table-column",{attrs:{prop:"value",label:"记录值"}}),e._v(" "),l("el-table-column",{attrs:{prop:"mx",label:"MX优先级"}}),e._v(" "),l("el-table-column",{attrs:{prop:"ttl",label:"TTL值"}}),e._v(" "),l("el-table-column",{attrs:{prop:"file_name",label:"文件"}}),e._v(" "),l("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",size:"small"},on:{click:function(l){e.handleClick(t.row)}}},[e._v("删除")])]}}])})],1)],1)])],1)})),e._v(" "),l("el-dialog",{attrs:{visible:e.enable_add},on:{"update:visible":function(t){e.enable_add=t}},model:{value:e.enable_add,callback:function(t){e.enable_add=t},expression:"enable_add"}},[l("el-col",{staticClass:"dialog_title",attrs:{slot:"title"},slot:"title"},[l("span",[e._v("添加解析到："+e._s(e.add_recods.file_name))])]),e._v(" "),l("el-form",{ref:"add_recods",staticStyle:{width:"90%"},attrs:{model:e.add_recods,rules:e.rules}},[l("el-form-item",{attrs:{label:"记录类型：","label-width":e.formLabelWidth,prop:"type"}},[l("el-select",{attrs:{placeholder:"请选择记录类型"},model:{value:e.add_recods.type,callback:function(t){e.$set(e.add_recods,"type",t)},expression:"add_recods.type"}},[l("el-option",{attrs:{label:"A",value:"A"}}),e._v(" "),l("el-option",{attrs:{label:"CNAME",value:"CNAME"}})],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"主机记录：","label-width":e.formLabelWidth,prop:"value"}},[l("el-input",{attrs:{type:"text",placeholder:"输入主机记录如：1.1.1.1"},model:{value:e.add_recods.value,callback:function(t){e.$set(e.add_recods,"value","string"==typeof t?t.trim():t)},expression:"add_recods.value"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"记录值：","label-width":e.formLabelWidth,prop:"host"}},[l("el-input",{attrs:{type:"text",placeholder:"输入记录值"},model:{value:e.add_recods.host,callback:function(t){e.$set(e.add_recods,"host","string"==typeof t?t.trim():t)},expression:"add_recods.host"}})],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{type:"success"},on:{click:function(t){e.subRecode("add_recods")}}},[e._v("立即提交")]),e._v(" "),l("el-button",{on:{click:function(t){e.resetRecode("add_recods")}}},[e._v("重置")])],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"35%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("dl",[l("span",[e._v(e._s(e.one_row.file_name)+" :  ")]),e._v(" "),l("span",[e._v(e._s(e.one_row.type))]),e._v(" "),l("span",[e._v(e._s(e.one_row.host))]),e._v(" "),l("span",[e._v(e._s(e.one_row.value))])]),e._v(" "),l("dl",[e._v("确定要删除这条记录吗？")]),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleRecode()}}},[e._v("确 定")])],1)]),e._v(" "),l("el-dialog",{attrs:{title:"警告",visible:e.outerVisible},on:{"update:visible":function(t){e.outerVisible=t}}},[l("span",{staticStyle:{color:"#149C4C","font-weight":"700","font-size":"16px"}},[e._v("\n              "+e._s(e.permissionMsg)+"\n      ")]),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.outerVisible=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.toMyself}},[e._v("去申请")])],1)])],1)},staticRenderFns:[]}},392:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{permissionMsg:"",outerVisible:!1,enable_add:!1,dialogVisible:!1,formLabelWidth:"108px",editableTabsValue:"2",editableTabs:[{title:"Tab 1",name:"1",content:"Tab 1 content"},{title:"Tab 2",name:"2",content:"Tab 2 content"}],tabIndex:2,res_data:{},file_name:"",add_recods:{file_name:"",type:"",host:"",value:""},one_row:{file_name:"",type:"",host:"",value:""},rules:{type:[{required:!0,message:"请选择记录类型",trigger:"change"}],value:[{required:!0,message:"输入主机记录",trigger:"blur"}],host:[{required:!0,message:"输入记录值",trigger:"blur"}]}}},activated:function(){this.get_all_list()},methods:{add_item:function(e){this.enable_add=!this.enable_add,this.add_recods.file_name=e,console.log("file",this.add_recods.file_name,this.enable_add)},subRecode:function(e){var t=this;this.$refs[e].validate(function(e){return!!e&&(console.log("add_info",t.add_recods),void t.$http.post(t.dns_api+"add_item/",t.add_recods).then(function(e){t.permissionControl(e),t.enable_add=!t.enable_add,t.$notify({title:"成功",message:"信息已提交",type:"success"}),t.get_all_list(),t.add_recods.file_name="",t.add_recods.value="",t.add_recods.host="",t.add_recods.type=""}).catch(function(e){t.$notify.error({title:"错误",message:"信息提交失败"})}))})},permissionControl:function(e){if("21"===e.data.code){window.localStorage.setItem("permission",e.data.data),this.permissionMsg=e.data.msg,this.outerVisible=!0;var t=window.localStorage.getItem("permission");console.log(t)}},toMyself:function(){this.outerVisible=!this.outerVisible,window.location="/myself"},get_all_list:function(){var e=this;console.log(this.dns_api+"list"),this.$http.get(this.dns_api+"list").then(function(t){e.res_data=t.data}).catch(function(t){e.res_data="error",console.log(e.res_data)})},handleClick:function(e){this.dialogVisible=!this.dialogVisible,this.one_row=e},handleRecode:function(){var e=this;this.dialogVisible=!this.dialogVisible,this.$http.post(this.dns_api+"mod_item/",this.one_row).then(function(t){e.permissionControl(t),e.$notify({title:"成功",message:"删除成功",type:"success"}),e.get_all_list()}).catch(function(t){e.$notify.error({title:"错误",message:"删除失败"})})},resetRecode:function(e){this.$refs[e].resetFields(),console.log("this reset",e)}}}}});
//# sourceMappingURL=4.6f41d94285947b10127e.js.map