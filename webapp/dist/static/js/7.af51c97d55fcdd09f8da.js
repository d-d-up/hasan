webpackJsonp([7,15],{224:function(t,e,s){e=t.exports=s(5)(),e.push([t.id,".text{font-size:14px}.item{padding:18px 0}.box-card{width:100%}.itemclass{padding:25px 50px}.tclass{color:#149c4c;font-weight:700;font-size:16px}.el-input__inner,.textClass{border-style:solid;border-radius:4px;border:1px solid #bfd9cc}.textClass{background-color:#fff}.textLine{margin-left:15px}.aClass{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.bigFont{font-weight:700;font-size:16px;color:#1f3d2e}","",{version:3,sources:["/./src/pages/myself/index.vue"],names:[],mappings:"AACA,MACE,cAAgB,CACjB,AACD,MACE,cAAgB,CACjB,AACD,UACE,UAAY,CACb,AACD,WACE,iBAAmB,CACpB,AACD,QACE,cAAwB,AACxB,gBAAiB,AACjB,cAAgB,CACjB,AAMD,4BAJE,mBAAoB,AACpB,kBAAmB,AACnB,wBAAqC,CAOtC,AALD,WACE,qBAAwB,CAIzB,AACD,UACE,gBAAkB,CACnB,AACD,QACE,oBAAqB,AACrB,aAAc,AACd,sBAAuB,AACnB,kBAAoB,CACzB,AACD,SACE,gBAAiB,AACjB,eAAgB,AAChB,aAAc,CACf",file:"index.vue",sourcesContent:["\n.text {\n  font-size: 14px;\n}\n.item {\n  padding: 18px 0;\n}\n.box-card {\n  width: 100%;\n}\n.itemclass {\n  padding: 25px 50px;\n}\n.tclass {\n  color: rgb(20, 156, 76);\n  font-weight: 700;\n  font-size: 16px;\n}\n.el-input__inner {\n  border-style: solid;\n  border-radius: 4px;\n  border: 1px solid rgb(191, 217, 204);\n}\n.textClass {\n  background-color: white;\n  border-style: solid;\n  border-radius: 4px;\n  border: 1px solid rgb(191, 217, 204);\n}\n.textLine {\n  margin-left: 15px;\n}\n.aClass {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n      align-items: center;\n}\n.bigFont {\n  font-weight: 700;\n  font-size: 16px;\n  color: #1F3D2E\n}\n"],sourceRoot:"webpack://"}])},239:function(t,e,s){var a=s(224);"string"==typeof a&&(a=[[t.id,a,""]]);s(6)(a,{});a.locals&&(t.exports=a.locals)},312:function(t,e,s){s(239);var a=s(2)(s(395),s(328),null,null);t.exports=a.exports},328:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("hs-layout_auto",[s("div",{staticStyle:{"padding-top":"50px"}},[s("div",{staticClass:"tabs_class",staticStyle:{"background-color":"white"}},[s("el-card",{staticClass:"box-card"},[s("el-tabs",{attrs:{type:"border-card"}},[s("el-tab-pane",{attrs:{label:"我的权限"}},[s("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[s("el-collapse-item",{attrs:{title:"已有权限",name:"1"}},[s("div",{staticStyle:{"font-weight":"700","font-size":"16px"}},[t._v("用户： "+t._s(t.username))]),t._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.groups,"tooltip-effect":"dark"}},[s("el-table-column",{attrs:{width:"55"}}),t._v(" "),s("el-table-column",{attrs:{label:"ID",width:"120",prop:"group_id"}}),t._v(" "),s("el-table-column",{attrs:{prop:"group__groupextend__be_app",label:"APP",width:"120"}}),t._v(" "),s("el-table-column",{attrs:{prop:"group__name",label:"权限组","show-overflow-tooltip":""}})],1)],1),t._v(" "),s("el-collapse-item",{attrs:{title:"申请权限",name:"2"}},[s("el-form",{ref:"applyPermission",attrs:{"label-width":"80px",rules:t.applyPermissions}},[s("el-form-item",{attrs:{label:"模块",prop:"app"}},[s("el-select",{attrs:{placeholder:"请选择需要申请权限的APP"},model:{value:t.applyPermission.app,callback:function(e){t.$set(t.applyPermission,"app",e)},expression:"applyPermission.app"}},t._l(t.result,function(e){return s("el-option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}))],1),t._v(" "),s("el-form-item",{attrs:{label:"内容",prop:"text"}},[s("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入具体操作的描述，如：申请操作DNS权限，新增解析记录等"},model:{value:t.applyPermission.text,callback:function(e){t.$set(t.applyPermission,"text",e)},expression:"applyPermission.text"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitApply()}}},[t._v("提交申请")])],1)],1)],1)],1)],1),t._v(" "),s("el-tab-pane",{attrs:{label:"我的操作"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"数据库管理"}},[s("el-collapse",{model:{value:t.sqlModels,callback:function(e){t.sqlModels=e},expression:"sqlModels"}},[s("el-collapse-item",{attrs:{title:"已有dbmain账号",name:"1"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("a",{staticClass:"aClass bigFont",attrs:{target:"_blank",href:t.dbmain}},[t._v("\n                      去往dbmain数据库管理平台\n                    ")])]),t._v(" "),s("el-col",{staticClass:"textClass",attrs:{span:12}},[s("span",[s("p",{staticClass:"textLine"},[t._v("关于dbmain")]),t._v(" "),s("p",{staticClass:"textLine"},[t._v("dbmain是数据库SQL审核平台")]),t._v(" "),s("p",{staticClass:"textLine"},[t._v("dbamin 使用独立账号管理，如无dbmain账号请在下面申请")])])])],1)],1),t._v(" "),s("el-collapse-item",{attrs:{title:"申请dbmain账号",name:"2"}},[s("el-form",{ref:"dbmainForm",attrs:{"label-width":"80px"}},[s("el-form-item",{attrs:{label:"用户"}},[t._v(t._s(t.username))]),t._v(" "),s("el-form-item",{attrs:{label:"内容",prop:"text"}},[s("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入申请内容，如 申请开通的用户、操作数据库、表的权限等"},model:{value:t.dbmainForm.text,callback:function(e){t.$set(t.dbmainForm,"text",e)},expression:"dbmainForm.text"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dbmainApply()}}},[t._v("提交申请")])],1)],1)],1)],1)],1)],1)],1)],1)])])},staticRenderFns:[]}},395:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{activeNames:["1","2"],sqlModels:["1","2"],dbmain:"http://dbmain.huashenghaoche.work",username:"",groups:"",result:[],tableData2:"",allApps:[],dbmainForm:{user:"",text:""},applyPermission:{user:"",text:"",app:""},applyPermissions:{app:[{required:!0,message:"请选择申请哪个模块应用的权限",trigger:"change"}],text:[{required:!0,message:"请输入尽量详细的权限描述",trigger:"blur"}]}}},created:function(){this.$route.params.hasOwnProperty("h")&&(this.h=this.$route.params.h)},activated:function(){this.getUserInfo()},methods:{checkInput:function(){return 0!==this.dbmainForm.text.length||(this.$alert("请输入申请信息!"),!1)},getUserInfo:function(){var t=this;this.username=window.localStorage.getItem("username"),this.$http.get(this.passport+"user_group/").then(function(e){t.groups=e.data.data}).catch(function(t){console.log(t)}),this.$http.get(this.passport+"list").then(function(e){t.tableData2=e.data.permission_data;for(var s in t.tableData2)t.allApps.push(t.tableData2[s].groupextend__be_app);for(var a=t.allApps.length,n=0;n<a;n++){for(var l=n+1;l<a;l++)t.allApps[n]===t.allApps[l]&&(l=++n);t.result.push(t.allApps[n])}}).catch(function(t){console.log(t)})},submitApply:function(){var t=this;this.applyPermission.user=window.localStorage.getItem("username"),console.log("applyPermission",this.applyPermission),this.$http.post(this.passport+"apply_permission/",this.applyPermission).then(function(e){console.log(e),t.$notify({title:"成功",message:"权限申请成功",type:"success"}),t.h?t.$router.go(-1):window.location="/myself"}).catch(function(e){console.log(e),t.$notify({title:"失败",message:"权限申请失败",type:"success"})})},dbmainApply:function(){var t=this;this.checkInput()&&(this.dbmainForm.user=window.localStorage.getItem("username"),console.log("dbmainForm",this.dbmainForm),this.$http.post(this.passport+"apply_dbmain/",this.dbmainForm).then(function(e){console.log(e),t.$notify({title:"成功",message:"申请成功",type:"success"}),t.h?t.$router.go(-1):window.location="/myself"}).catch(function(e){console.log(e),t.$notify({title:"失败",message:"申请失败",type:"success"})}))}}}}});
//# sourceMappingURL=7.af51c97d55fcdd09f8da.js.map